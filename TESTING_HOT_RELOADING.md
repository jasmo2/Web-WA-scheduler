# Testing Hot Reloading Functionality

This guide explains how to test if the hot reloading feature is working correctly for your Chrome extension development setup.

## 1. Start the Development Server

Open your terminal, navigate to the project's root directory, and run the development script:

```bash
npm run dev
```

This command starts the Vite development server in development mode and will watch for file changes.

## 2. Load/Reload the Extension in Chrome

   a. Open Google Chrome and navigate to `chrome://extensions`.
   b. Enable **Developer mode** using the toggle switch in the top-right corner.
   c. If the extension is already loaded, click the **reload icon** (circular arrow) on the extension card.
   d. If the extension is not loaded:
      i. Click on **"Load unpacked"**.
      ii. Navigate to and select the `dist` directory within your project. This directory is generated by the `npm run dev` or `npm run build` command and contains the built extension files.

## 3. Test Hot Reloading

### a. Test Popup Updates (Vue Components)

   i.   Open the extension's popup by clicking on its icon in the Chrome toolbar.
   ii.  Make a small, visible change in a Vue component. For example, open `src/components/Info.vue` or `src/App.vue` and modify some text content (e.g., change a heading or a paragraph).
   iii. **Check:** The extension popup should update automatically with the new text *without* you needing to close and reopen it or manually reload the extension.

### b. Test Content Script Updates

   i.   Navigate to a webpage where your content script is active (e.g., WhatsApp Web, if that's what `src/content/scheduler-button.ts` targets).
   ii.  Make a small change in your content script. For example, in `src/content/scheduler-button.ts`:
        *   Add a `console.log("Content script reloaded!");` at the beginning of the script.
        *   Slightly modify how or where the button is injected onto the page.
   iii. **Check:**
        *   Refresh the WhatsApp Web page (or the target page for your content script).
        *   The changes should be reflected (e.g., the button might look or behave differently).
        *   Open the browser's developer console (Right-click on the page -> Inspect -> Console) and look for your `console.log` message. You should see it after the page refresh. Content scripts often require a page reload for changes to take effect.

### c. Test Background Script Updates

   i.  Make a small change in your background script, `src/background/index.ts`. For example:
       *   Add a `console.log("Background script reloaded at:", new Date().toLocaleTimeString());` inside an event listener (like `chrome.runtime.onInstalled`) or at the top level of the script if appropriate.
   ii. **Check:**
       *   Go to `chrome://extensions`.
       *   Find your extension and click on the link to inspect its service worker (often named "service worker" or similar). This will open a dedicated DevTools window for the background script.
       *   Look for your `console.log` message. The background script should reload automatically, and you should see the message appear in its console shortly after you save the file.

## 4. What to Look For

*   **Popup (Vue components):** Changes should appear almost instantly without any manual intervention.
*   **Content Scripts:** Changes typically require a manual refresh of the web page the content script is running on. The hot reload setup should automatically rebuild the content script; you just need to refresh the page to see its effects.
*   **Background Script:** The background script should reload automatically. You'll see this reflected in its dedicated console (service worker console).

## 5. Troubleshooting

If hot reloading doesn't seem to be working:

*   **General:**
    *   Ensure the development server (`npm run dev`) is still running and didn't crash. Check your terminal for error messages.
    *   Double-check that you've correctly loaded the `dist` folder as an unpacked extension.
*   **Popup/Vue Components:**
    *   Open the popup and then right-click inside it and select "Inspect" to open its DevTools. Check the console for any errors.
*   **Content Scripts:**
    *   Open the DevTools console on the webpage where the content script is supposed to run. Look for errors.
*   **Background Script:**
    *   Go to `chrome://extensions`, find your extension, and click the "service worker" link. Check the console in the window that opens for any errors. The `hot-reload-extension-vite` plugin often logs messages here indicating it's active or if it encounters issues.

By following these steps, you can verify that the hot reloading functionality is set up correctly and speeds up your extension development workflow.
